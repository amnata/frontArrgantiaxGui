<div class="container">
  <button class="btn-cancel" (click)="goHome()">
  <img src="assets/icons/back.svg" alt="Retour" class="icon" />
</button>

  <h1>ğŸŒ¿ Classification de Culture</h1>
  <p class="subtitle">Identification automatique des cultures : Riz, Oignon, Arachide</p>
  <!-- Option 2 : FlÃ¨che retour -->
  <!-- Upload Section -->
  <div class="upload-section">
    <input type="file" (change)="onFileSelected($event)" accept="image/*" hidden #fileInput>
    <div class="drop-zone" (click)="fileInput.click()">
      <div class="drop-content">
        <span class="upload-icon">ğŸ“¸</span>
        <p><strong>TÃ©lÃ©chargez une photo de votre culture</strong></p>
        <small>Notre appli identifiera automatiquement le type de culture</small>
      </div>
    </div>
  </div>

  <!-- Preview Section -->
  <div *ngIf="previewUrl" class="preview-section">
    <h3>Image sÃ©lectionnÃ©e</h3>
    <img [src]="previewUrl" alt="AperÃ§u" class="preview-image">
  </div>

  <!-- Crops Info -->
  <div class="crops-info">
    <h3>ğŸŒ¾ Cultures Identifiables</h3>
    <div class="crops-grid">
      <div class="crop-card">
        <div class="crop-icon">ğŸ¥œ</div>
        <h4>Arachide</h4>
        <p class="crop-description">LÃ©gumineuse olÃ©agineuse, rÃ©sistante Ã  la sÃ©cheresse</p>
        <div class="crop-details">
          <span class="detail-tag">Saison: SÃ¨che</span>
          <span class="detail-tag">Cycle: 4-5 mois</span>
        </div>
        <div class="crop-features">
          <div class="feature">ğŸŒ± Semis direct</div>
          <div class="feature">ğŸ’§ Irrigation modÃ©rÃ©e</div>
        </div>
      </div>
      
      <div class="crop-card">
        <div class="crop-icon">ğŸ§…</div>
        <h4>Oignon</h4>
        <p class="crop-description">LÃ©gume bulbe, sensible aux maladies fongiques</p>
        <div class="crop-details">
          <span class="detail-tag">Saison: TempÃ©rÃ©e</span>
          <span class="detail-tag">Cycle: 4-5 mois</span>
        </div>
        <div class="crop-features">
          <div class="feature">ğŸ”„ Rotation 3-4 ans</div>
          <div class="feature">ğŸ’¦ Arrosage rÃ©gulier</div>
        </div>
      </div>
      
      <div class="crop-card">
        <div class="crop-icon">ğŸš</div>
        <h4>Riz</h4>
        <p class="crop-description">Culture cÃ©rÃ©aliÃ¨re de base</p>
        <div class="crop-details">
          <span class="detail-tag">Saison: Humide</span>
          <span class="detail-tag">Cycle: 3-6 mois</span>
        </div>
        <div class="crop-features">
          <div class="feature">ğŸŒŠ Culture inondÃ©e</div>
          <div class="feature">ğŸ”„ Repiquage</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Classify Button -->
  <div class="action-section" *ngIf="selectedFile">
    <button (click)="onClassify()" [disabled]="loading" class="classify-btn">
      <span *ngIf="!loading">ğŸŒ¿ Identifier la Culture</span>
      <span *ngIf="loading">â³ Identification en cours...</span>
    </button>
  </div>

  <!-- Results -->
  <div *ngIf="classificationResult" class="results-section">
    <h2>ğŸ“Š RÃ©sultat de l'Identification</h2>
    
    <div class="main-result">
      <div class="result-header">
        <h3>{{classificationResult.icon}} Culture IdentifiÃ©e : <strong>{{classificationResult.crop}}</strong></h3>
        <span class="confidence-badge">{{classificationResult.confidence}}%</span>
      </div>
    </div>

    <div class="details-section">
      <div class="detail-card">
        <h4>ğŸ“– Description</h4>
        <p>{{classificationResult.description}}</p>
      </div>

      <div class="detail-card">
        <h4>ğŸ’¡ Conseils de culture</h4>
        <ul>
          <li *ngFor="let tip of classificationResult.tips">{{tip}}</li>
        </ul>
      </div>

      <div class="detail-card">
        <h4>ğŸ“ˆ ProbabilitÃ©s dÃ©taillÃ©es</h4>
        <div class="probability-bars">
          <div *ngFor="let prob of classificationResult.probabilities" class="probability-item">
            <span class="label">{{prob.name}}</span>
            <div class="progress-bar">
              <div class="progress-fill" [style.width.%]="prob.value"></div>
            </div>
            <span class="percentage">{{prob.value}}%</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>