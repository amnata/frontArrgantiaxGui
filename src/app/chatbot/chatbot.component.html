<div class="chatbot-wrapper">
  <!-- Bouton flottant pour ouvrir le chat -->
  <button 
    class="chat-toggle-btn" 
    (click)="toggleChat()"
    [class.active]="isChatOpen">
    <span *ngIf="!isChatOpen" class="chat-icon">ðŸ’¬</span>
    <span *ngIf="isChatOpen" class="close-icon">âœ•</span>
  </button>

  <!-- FenÃªtre de chat -->
  <div class="chat-window" [class.open]="isChatOpen">
    <!-- En-tÃªte -->
    <div class="chat-header">
      <div class="header-content">
        <div class="bot-avatar">ðŸŒ¾</div>
        <div class="header-info">
          <h3>ArrGantiaxGui Assistant</h3>
          <p class="status">
            <span class="status-dot"></span>
            En ligne
          </p>
        </div>
      </div>
      <button class="minimize-btn" (click)="toggleChat()">âˆ’</button>
    </div>

    <!-- Actions rapides -->
    <div class="quick-actions">
      <button 
        *ngFor="let action of quickActions"
        class="action-btn"
        (click)="handleQuickAction(action.action)">
        <span class="action-icon">{{ action.icon }}</span>
        <span class="action-label">{{ action.label }}</span>
      </button>
    </div>

    <!-- Messages -->
    <div class="messages-container" #messagesContainer>
      <div 
        *ngFor="let message of messages"
        class="message-wrapper"
        [class.user-message]="message.isUser"
        [class.bot-message]="!message.isUser">
        
        <div class="message-avatar" *ngIf="!message.isUser">
          ðŸ¤–
        </div>
        
        <div class="message-content" [class.info-message]="message.type === 'info'">
          <div class="message-text">{{ message.text }}</div>
          <div class="message-time">
            {{ message.timestamp | date:'HH:mm' }}
          </div>
        </div>
        
        <div class="message-avatar" *ngIf="message.isUser">
          ðŸ‘¤
        </div>
      </div>

      <!-- Indicateur de frappe -->
      <div class="message-wrapper bot-message" *ngIf="isTyping">
        <div class="message-avatar">ðŸ¤–</div>
        <div class="typing-indicator">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </div>

    <!-- RÃ©ponses rapides -->
    <div class="quick-replies" *ngIf="messages.length <= 1">
      <div class="quick-replies-title">Suggestions :</div>
      <div class="quick-replies-list">
        <button 
          *ngFor="let reply of quickReplies"
          class="quick-reply-btn"
          (click)="handleQuickReply(reply)">
          {{ reply }}
        </button>
      </div>
    </div>

    <!-- Zone de saisie -->
    <div class="input-area">
      <div class="input-wrapper">
        <button class="attach-btn" title="Joindre un fichier">
          ðŸ“Ž
        </button>
        <textarea
          [(ngModel)]="userMessage"
          (keypress)="onKeyPress($event)"
          placeholder="Ã‰crivez votre message..."
          class="message-input"
          rows="1"></textarea>
        <button 
          class="send-btn" 
          (click)="sendMessage()"
          [disabled]="!userMessage.trim()">
          <span class="send-icon">âž¤</span>
        </button>
      </div>
    </div>
  </div>
</div>